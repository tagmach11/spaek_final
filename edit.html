<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=5.0, user-scalable=yes">
    <title>AX2 - ê°•ì˜ ë²ˆì—­ í¸ì§‘</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="stylesheet" href="styles.css">
    <link rel="stylesheet" href="edit.css">
</head>
<body>
    <!-- ëª¨ë°”ì¼ ë©”ë‰´ ë²„íŠ¼ -->
    <button class="mobile-menu-btn" id="mobileMenuBtn" style="display: none;">
        <i class="fas fa-bars"></i>
    </button>
    
    <!-- ì‚¬ì´ë“œë°” ì˜¤ë²„ë ˆì´ -->
    <div class="sidebar-overlay" id="sidebarOverlay"></div>
    
    <!-- ìƒë‹¨ ë„¤ë¹„ê²Œì´ì…˜ -->
    <nav class="glass-nav">
        <div class="nav-content">
            <div class="nav-left">
                <div class="logo" onclick="location.href='index.html'">AX2</div>
                <div class="service-tabs">
                    <button class="service-tab active" onclick="location.href='index.html'">
                        ìë™ ë²ˆì—­/ë‹¤êµ­ì–´ ìë§‰ ì„œë¹„ìŠ¤
                    </button>
                    <button class="service-tab" onclick="location.href='live_lecture.html'">
                        ì‹¤ì‹œê°„ ê°•ì˜ ì„œë¹„ìŠ¤
                    </button>
                </div>
            </div>
            <div class="nav-right">
                <div class="plan-info">
                    <span class="highlight">Free</span> <span id="remaining-time">0ë¶„ ë‚¨ìŒ</span>
                </div>
                <a href="login.html" class="login-btn">ë¡œê·¸ì¸</a>
            </div>
        </div>
    </nav>

    <!-- ì™¼ìª½ ì‚¬ì´ë“œë°” -->
    <aside class="sidebar">
        <div class="sidebar-content">
            <div class="sidebar-header">
                <h3 class="sidebar-title">AX2</h3>
            </div>
            <nav class="sidebar-nav">
                <a href="index.html" class="sidebar-item" data-page="home">
                    <i class="fas fa-home"></i>
                    <span>í™ˆ</span>
                </a>
                <a href="mypage.html" class="sidebar-item active" data-page="mypage">
                    <i class="fas fa-user"></i>
                    <span>ë§ˆì´í˜ì´ì§€</span>
                </a>
            </nav>
        </div>
    </aside>

    <!-- ë©”ì¸ ì½˜í…ì¸  -->
    <div class="main-content">
        <!-- ì¢Œì¸¡ í¸ì§‘ ì˜ì—­ -->
        <div class="edit-section">
            <div class="video-title-display" id="video-title-display">
                <div class="title-wrapper">
                    <h2 class="video-title-text" id="video-title-text">ê°•ì˜ ì œëª©</h2>
                    <button class="edit-title-btn" id="edit-title-btn" title="ì œëª© í¸ì§‘">
                        <i class="fas fa-pencil-alt"></i>
                    </button>
                </div>
            </div>
            <div class="edit-header">
                <div class="language-tabs">
                    <div class="lang-tab active" data-lang="ko">
                        <span class="lang-flag">ğŸ‡°ğŸ‡·</span>
                        <span>Korean</span>
                    </div>
                    <div class="lang-tab" data-lang="en">
                        <span class="lang-flag">ğŸ‡ºğŸ‡¸</span>
                        <span>English</span>
                    </div>
                </div>
            </div>

            <div class="transcription-list" id="transcription-list">
                <!-- í…ìŠ¤íŠ¸ ì„¸ê·¸ë¨¼íŠ¸ë“¤ì´ ì—¬ê¸°ì— ë™ì ìœ¼ë¡œ ì¶”ê°€ë©ë‹ˆë‹¤ -->
            </div>
        </div>

        <!-- ìš°ì¸¡ ë¹„ë””ì˜¤ ì˜ì—­ -->
        <div class="video-section">
            <div class="video-tabs">
                <button class="video-tab active" data-tab="original">ì›ë³¸</button>
                <button class="video-tab" data-tab="translation">ë²ˆì—­</button>
            </div>

            <div class="warning-banner">
                í¸ì§‘í•œ ë‚´ìš©ì€ ìë™ìœ¼ë¡œ ë°˜ì˜ë˜ì§€ ì•ŠìŠµë‹ˆë‹¤. ì™„ë£Œ í›„ 'ë³€ê²½ì‚¬í•­ ì ìš©í•˜ê¸°'ë¥¼ ëˆŒëŸ¬ ì ìš©í•´ ì£¼ì„¸ìš”.
            </div>

            <div class="video-container">
                <!-- ë“œë˜ê·¸ ì•¤ ë“œë¡­ ì˜ì—­ (ë¹„ë””ì˜¤ê°€ ì—†ì„ ë•Œ í‘œì‹œ) -->
                <div class="video-drop-zone" id="video-drop-zone" style="display: none;">
                    <input type="file" id="video-file-input" class="hidden" accept="video/*">
                    <div class="drop-zone-content">
                        <div class="drop-zone-icon">
                            <svg viewBox="0 0 64 64" fill="none" xmlns="http://www.w3.org/2000/svg" style="width: 100%; height: 100%;">
                                <path d="M16 12V52C16 54.2091 17.7909 56 20 56H44C46.2091 56 48 54.2091 48 52V20L36 12H20C17.7909 12 16 13.7909 16 16Z" stroke="currentColor" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round" fill="none"/>
                                <path d="M36 12V20H48" stroke="currentColor" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round" fill="none"/>
                                <path d="M32 28V44M24 36L32 28L40 36" stroke="currentColor" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round" fill="none"/>
                            </svg>
                        </div>
                        <h3 class="drop-zone-title">ì˜ìƒì„ ë“œë˜ê·¸í•˜ê±°ë‚˜ í´ë¦­í•˜ì—¬ ì—…ë¡œë“œ</h3>
                        <p class="drop-zone-subtitle">MP4, MOV, AVI, WEBM (ìµœëŒ€ 2GB)</p>
                    </div>
                </div>
                
                <!-- ë¹„ë””ì˜¤ í”Œë ˆì´ì–´ (ë¹„ë””ì˜¤ê°€ ìˆì„ ë•Œ í‘œì‹œ) -->
                <div class="video-player-wrapper" id="video-player-wrapper" style="display: flex;">
                    <video class="video-player" id="video-player" preload="metadata" controls>
                        <source src="" type="video/mp4">
                    </video>
                    <div class="subtitle-overlay" id="subtitle-overlay">
                        <div class="subtitle-text" id="subtitle-text"></div>
                    </div>
                </div>
                
                <!-- ë¹„ë””ì˜¤ ë¡œë“œ ì‹¤íŒ¨ placeholder -->
                <div class="video-placeholder" id="video-placeholder" style="display: none;">
                    <i class="fas fa-video-slash"></i>
                    <div>ë¹„ë””ì˜¤ë¥¼ ë¶ˆëŸ¬ì˜¬ ìˆ˜ ì—†ìŠµë‹ˆë‹¤</div>
                    <div style="font-size: 14px; color: #999999; margin-top: 8px;">ë¹„ë””ì˜¤ íŒŒì¼ì´ ì—†ê±°ë‚˜ ë¡œë“œí•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤.</div>
                    <button class="retry-btn" onclick="document.getElementById('video-file-input').click()" style="margin-top: 16px; padding: 8px 16px; background: #667eea; color: white; border: none; border-radius: 6px; cursor: pointer;">
                        ë‹¤ì‹œ ì‹œë„
                    </button>
                </div>
            </div>

            <div class="video-controls">
                <div class="controls-row">
                    <button class="play-btn" id="play-btn">â–¶</button>
                    <span class="time-display" id="time-display">0:00:00</span>
                    <div class="progress-bar" id="progress-bar">
                        <div class="progress-fill" id="progress-fill" style="width: 0%"></div>
                    </div>
                    <div class="control-icons">
                        <button class="control-icon" id="caption-btn" title="ìë§‰">CC</button>
                        <button class="control-icon" id="volume-btn" title="ë³¼ë¥¨">
                            <svg class="volume-icon" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                                <path d="M3 9v6h4l5 5V4L7 9H3z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" fill="none"/>
                                <path class="volume-wave" d="M15.54 8.46a5 5 0 0 1 0 7.07" stroke="currentColor" stroke-width="2" stroke-linecap="round" fill="none"/>
                                <path class="volume-wave" d="M18.36 5.64a9 9 0 0 1 0 12.72" stroke="currentColor" stroke-width="2" stroke-linecap="round" fill="none"/>
                            </svg>
                        </button>
                        <button class="control-icon" id="speed-btn" title="ì¬ìƒ ì†ë„">1x</button>
                        <button class="control-icon" id="fullscreen-btn" title="ì „ì²´í™”ë©´">â›¶</button>
                    </div>
                </div>

                <div class="action-buttons">
                    <button class="action-btn apply-btn-inline" onclick="applyChanges()">
                        ë³€ê²½ì‚¬í•­ ì ìš©í•˜ê¸°
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- ì œëª© í¸ì§‘ ëª¨ë‹¬ -->
    <div class="title-edit-modal" id="title-edit-modal" style="display: none;">
        <div class="modal-backdrop" id="title-modal-backdrop"></div>
        <div class="title-edit-modal-content">
            <div class="title-edit-modal-header">
                <h3>ì œëª© í¸ì§‘</h3>
                <button class="title-edit-modal-close" id="title-edit-modal-close">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <div class="title-edit-modal-body">
                <input type="text" class="title-edit-input" id="title-edit-input" placeholder="ì œëª©ì„ ì…ë ¥í•˜ì„¸ìš”" maxlength="100">
                <div class="title-edit-char-count">
                    <span id="title-char-count">0</span> / 100
                </div>
            </div>
            <div class="title-edit-modal-footer">
                <button class="title-edit-cancel-btn" id="title-edit-cancel-btn">ì·¨ì†Œ</button>
                <button class="title-edit-save-btn" id="title-edit-save-btn">ì €ì¥</button>
            </div>
        </div>
    </div>

    <script src="auth-state.js" defer></script>
    <script src="edit.js" defer></script>
    <script>
        // í˜„ì¬ í˜ì´ì§€ì— ë”°ë¼ í™œì„± íƒ­ ì„¤ì •
        document.addEventListener('DOMContentLoaded', function() {
            const tabs = document.querySelectorAll('.service-tab');
            const currentPath = window.location.pathname;
            
            tabs.forEach(tab => {
                const href = tab.getAttribute('onclick');
                if (href) {
                    const url = href.match(/location\.href='([^']+)'/)?.[1];
                    if (url) {
                        const tabPath = url.split('/').pop() || 'index.html';
                        const currentPage = currentPath.split('/').pop() || 'index.html';
                        
                        // index.html, mypage.html, edit.htmlì€ ëª¨ë‘ ì²« ë²ˆì§¸ íƒ­ í™œì„±í™”
                        if (tabPath === 'index.html' && 
                            (currentPage === 'index.html' || currentPage === 'mypage.html' || currentPage === 'edit.html')) {
                            tab.classList.add('active');
                        } else if (tabPath === 'live_lecture.html' && currentPage === 'live_lecture.html') {
                            tab.classList.add('active');
                        } else {
                            tab.classList.remove('active');
                        }
                    }
                }
            });
        });
    </script>
</body>
</html>

