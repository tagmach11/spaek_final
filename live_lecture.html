<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=5.0, user-scalable=yes">
    <title>실시간 강의 서비스 - AX2</title>
    <link rel="stylesheet" href="styles.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
</head>
<body>
    <!-- 모바일 메뉴 버튼 -->
    <button class="mobile-menu-btn" id="mobileMenuBtn" style="display: none;">
        <i class="fas fa-bars"></i>
    </button>
    
    <!-- 사이드바 오버레이 -->
    <div class="sidebar-overlay" id="sidebarOverlay"></div>
    
    <!-- 배경 효과 -->
    <div class="background-effects">
        <div class="gradient-cloud cloud-1"></div>
        <div class="gradient-cloud cloud-2"></div>
        <div class="gradient-cloud cloud-3"></div>
        <canvas id="particles-canvas"></canvas>
        <canvas id="confetti-canvas"></canvas>
        <div class="reflection-light"></div>
    </div>

    <!-- 상단 네비게이션 -->
    <nav class="glass-nav">
        <div class="nav-content">
            <div class="nav-left">
                <div class="logo" onclick="location.href='index.html'">
                    <img src="AX2_logo.png" alt="AX2" class="logo-img">
                </div>
                <div class="service-tabs">
                    <button class="service-tab" onclick="location.href='index.html'">
                        자동 번역/다국어 자막
                    </button>
                    <button class="service-tab active" onclick="location.href='live_lecture.html'">
                        실시간 강의
                    </button>
                </div>
            </div>
            <div class="nav-right">
                <div class="plan-info">
                    <span class="highlight">Free</span> <span id="remaining-time">0분 남음</span>
                </div>
                <a href="login.html" class="login-btn">로그인</a>
            </div>
        </div>
    </nav>

    <!-- 메인 컨텐츠 -->
    <main class="main-container">
        <div class="content-wrapper">
            <!-- 왼쪽 사이드바 -->
            <aside class="sidebar">
                <div class="sidebar-content">
                    <div class="sidebar-header">
                        <h3 class="sidebar-title">실시간 강의</h3>
                    </div>
                    <nav class="sidebar-nav">
                        <a href="live_lecture.html" class="sidebar-item active" data-page="live-lecture">
                            <i class="fas fa-video"></i>
                            <span>강의 시작</span>
                        </a>
                        <a href="live_lecture_history.html" class="sidebar-item" data-page="live-history">
                            <i class="fas fa-history"></i>
                            <span>강의 기록</span>
                        </a>
                    </nav>
                </div>
            </aside>

            <!-- 중앙: 실시간 강의 컨텐츠 -->
            <div class="left-panel">
                <!-- 제목 및 부제목 -->
                <div class="upload-section-header">
                    <h1 class="upload-title">실시간 강의</h1>
                    <p class="upload-subtitle">라이브 강의를 시작하고 실시간으로 번역 및 자막을 제공하세요</p>
                </div>
                
                <!-- 실시간 강의 메인 영역 -->
                <div class="live-lecture-container">
                    <div class="live-lecture-card">
                        <div class="live-lecture-icon">
                            <i class="fas fa-video"></i>
                        </div>
                        <h2 class="live-lecture-title">새로운 강의 시작하기</h2>
                        <p class="live-lecture-description">
                            실시간 강의를 시작하여 참여자들에게 다국어 자막을 제공할 수 있습니다.
                        </p>
                        <button class="live-lecture-btn" onclick="startLiveLecture()">
                            <i class="fas fa-play"></i>
                            강의 시작
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </main>

    <script src="auth-state.js" defer></script>
    <script src="script.js" defer></script>
    <script>
        // 현재 페이지에 따라 활성 탭 설정
        document.addEventListener('DOMContentLoaded', function() {
            const tabs = document.querySelectorAll('.service-tab');
            const currentPath = window.location.pathname;
            
            tabs.forEach(tab => {
                const href = tab.getAttribute('onclick');
                if (href) {
                    const url = href.match(/location\.href='([^']+)'/)?.[1];
                    if (url) {
                        const tabPath = url.split('/').pop() || 'index.html';
                        const currentPage = currentPath.split('/').pop() || 'index.html';
                        
                        if (tabPath === 'live_lecture.html' && currentPage === 'live_lecture.html') {
                            tab.classList.add('active');
                        } else if (tabPath === 'index.html' && 
                            (currentPage === 'index.html' || currentPage === 'mypage.html' || currentPage === 'edit.html')) {
                            tab.classList.add('active');
                        } else {
                            tab.classList.remove('active');
                        }
                    }
                }
            });
        });

        // 모바일 메뉴 토글
        const mobileMenuBtn = document.getElementById('mobileMenuBtn');
        const sidebar = document.querySelector('.sidebar');
        const sidebarOverlay = document.getElementById('sidebarOverlay');
        
        if (mobileMenuBtn && sidebar && sidebarOverlay) {
            if (window.innerWidth <= 768) {
                mobileMenuBtn.style.display = 'block';
            }
            
            window.addEventListener('resize', () => {
                if (window.innerWidth <= 768) {
                    mobileMenuBtn.style.display = 'block';
                } else {
                    mobileMenuBtn.style.display = 'none';
                    sidebar.classList.remove('mobile-open');
                    sidebarOverlay.classList.remove('active');
                }
            });
            
            mobileMenuBtn.addEventListener('click', () => {
                sidebar.classList.toggle('mobile-open');
                sidebarOverlay.classList.toggle('active');
            });
            
            sidebarOverlay.addEventListener('click', () => {
                sidebar.classList.remove('mobile-open');
                sidebarOverlay.classList.remove('active');
            });
        }

        // 강의 시작 함수
        function startLiveLecture() {
            // 실시간 강의실 생성
            const lectureRoom = {
                id: 'lecture_' + Date.now(),
                createdAt: new Date().toISOString(),
                status: 'ready',
                title: '새로운 강의',
                participants: []
            };
            
            // 로컬 스토리지에 강의실 정보 저장
            localStorage.setItem('ax2_current_lecture', JSON.stringify(lectureRoom));
            
            // 실시간 강의실로 이동
            window.location.href = 'poly_talk.html';
        }
    </script>
</body>
</html>

